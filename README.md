# ISPLabs
Forum - .NET Core MVC Web Application

## Как выполнять задачи

1. Сразу нужно создать отдельного пользователя(чтобы не захломлять system). Я закинул скрипт на создание пользователя в `/SQL/create_user_forum.sql`.
  * Захотите в `SQL Developer` и запускаете это скрипт
  * Настраиваете новое подключение, параметры везде такие же, только логин и пароль будут соответсвенно `"forum"` и `"1234"`
  * Коннеститесь по этому подключению и уже там работаете, проект будет настроен как раз на это подключение
 
2. Внизу будут задачи, которые нужно сделать, всё, что вам нужно:
  * В начале выполнения задачи создать файл(пустой) с именем (я буду к каждой задаче писать какое имя файла должно быть). Это нужно для того, чтобы было понятно, что уже кто-то делает, что бы другой не начинал. Вот как раз сразу должны проверить если на гите этот файл, если нету, то начинайте делать.
  * Написали задачу, сохраняете уже готовый файл и переходите к следующей
  Скорее всего, подключать эти скрипты буду уже я сам.

3. Если понадобиться узнать столбцы таблицы, то заходите в файл `/SQL/create_tables.sql` и смотрите

4. Все задачи делайте и тестите в SQL Developer, можете юзать уже сделанные задачи, если нужно будет.

## Задачи
***Обратите внимание! Все задачи должны выполняться в том порядке, в котором написаны, потому, что следующие зависят от предыдущих.***

 - ~~`GET_ROLES.sql`~~ - запрос на вывод всех ролей
 - ~~`UPDATE_TOPIC.sql`~~ - процедура изменение имени темы по `id`
 - ~~`UPDATE_TOPIC_IS_CLOSED.sql`~~ - функция изменение состояния(закрыта\открыта) темы по `id`
 - `DELETE_USER.sql` - функция удаления пользователя, на вход идентификфатор, return number(1 - Успешно\0 - Ошибка), out параметр с текстом ошибки
 - `UPDATE_USER.sql` - функция изменения пользователя, на вход все поля, return number(1 - Успешно\0 - Ошибка), out параметр с текстом ошибки
 - `ENCRYPT.sql` - фукция шифрования, на входе и выходе VARCHAR2
 - Добавить вызов функции из `ENCRYPT.sql` в `LOGIN.sql`, `REGISTER.sql` и `UPDATE_USER.sql`
 - `CREATE_JOURNALING_TABLES.sql` - скрипт для создания таблиц журналирования, каждая таблица должна содержать все поля журналируемого объекта с префиксами `OLD_` и `NEW_`. Журналируемые таблицы `FORUM_USER`, `FORUM_MESSAGE`, `TOPIC`, `FORUM_PARTITION`, `FORUM_CATEGORY`.
 - `USER_JOURNALING.sql` - Сделать журналирование изменения\добавления\удаления пользователей
 - `MESSAGE_JOURNALING.sql` - Сделать журналирование изменения\добавления\удаления сообщений
 - `TOPIC_JOURNALING.sql` - Сделать журналирование изменения\добавления\удаления тем
 - `CATEGORY_JOURNALING.sql` - Сделать журналирование изменения\добавления\удаления категорий
 - `PARTITION_JOURNALING.sql` - Сделать журналирование изменения\добавления\удаления разделой
 - `ROLLBACK_USER.sql` - Функция отката таблицы пользователей до даты, которая подаётся на вход, return number(1 - Успешно\0 - Ошибка)
 - `ROLLBACK_MESSAGE.sql` - Функция отката таблицы сообщений до даты, которая подаётся на вход, return number(1 - Успешно\0 - Ошибка)
 - `ROLLBACK_TOPIC.sql` - Функция отката таблицы тем до даты, которая подаётся на вход, return number(1 - Успешно\0 - Ошибка)
 - `ROLLBACK_CATEGORY.sql` - Функция отката таблицы категорий до даты, которая подаётся на вход, return number(1 - Успешно\0 - Ошибка)
 - `ROLLBACK_PARTITION.sql` - Функция отката таблицы разделов до даты, которая подаётся на вход, return number(1 - Успешно\0 - Ошибка)
 - `ROLLBACK_FORUM.sql` - Функция отката, вызывает выше все перечесленные функции отката, если хоть на одной произошла ошибка, то откат отменяется(если откат каких-то таблиц уже произошёл) и возвращается 0 - Ошибка, в out параметре текста ошибки должно быть написано на какой таблице откат не прошёл. Если все функции отката успешно выполнились, то возвращает 1.
